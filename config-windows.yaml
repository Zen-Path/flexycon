uservariables:
    active_dotdrop_profile: "Active dotdrop profile"
    git_email: "Git email"
    git_username: "Git username"

config:
    backup: false
    banner: false
    create: true
    dotpath: dotfiles
    keepdot: false
    link_dotfile_default: nolink
    link_on_import: nolink
    longkey: false
    import_variables:
        - uservariables.yaml:optional

actions:
    post:
        vscode_extensions_save: code --list-extensions | sort > "{{@@ f_vscode_extensions @@}}"
        vscode_extensions_install: cat "{{@@ f_vscode_extensions @@}}" | xargs -n 1 code --install-extension

dotfiles:
    # Shell
    f_bash_profile:
        src: config/shell/profile.sh
        dst: ~/.bash_profile

    f_bash_config:
        src: config/bash/profile.sh
        dst: ~/.bashrc

    # VSCode
    f_vscode_settings:
        src: "{{@@ d_vscode_src @@}}/settings.json"
        dst: "{{@@ d_vscode_dst @@}}/settings.json"

    f_vscode_keybindings:
        src: "{{@@ d_vscode_src @@}}/keybindings.json"
        dst: "{{@@ d_vscode_dst @@}}/keybindings.json"

    # Browser

    d_firefox_chrome:
        src: "{{@@ d_firefox_chrome_src @@}}"
        dst: "{{@@ d_firefox_profiles @@}}/chrome"

    f_firefox_user:
        src: "{{@@ f_firefox_user_src @@}}"
        dst: "{{@@ d_firefox_profiles @@}}/user.js"

    # Other
    f_git_config:
        src: config/git/config.ini
        dst: ~/.gitconfig

    # File Manager
    f_yazi_config:
        src: config/yazi/yazi.toml
        dst: "{{@@ d_app_data @@}}/yazi/config/yazi.toml"

    f_yazi_keymap:
        src: config/yazi/keymap.toml
        dst: "{{@@ d_app_data @@}}/yazi/config/keymap.toml"

    f_yazi_theme:
        src: config/yazi/theme.toml
        dst: "{{@@ d_app_data @@}}/yazi/config/theme.toml"

    f_yazi_package:
        src: config/yazi/package.toml
        dst: "{{@@ d_app_data @@}}/yazi/config/package.toml"

    f_yazi_init:
        src: config/yazi/init.lua
        dst: "{{@@ d_app_data @@}}/yazi/config/init.lua"

    d_yazi_plugin_custom_rename:
        src: config/yazi/plugins/custom-rename.yazi
        dst: "{{@@ d_app_data @@}}/yazi/plugins/custom-rename.yazi"

    d_yazi_plugin_custom_search:
        src: config/yazi/plugins/custom-search.yazi
        dst: "{{@@ d_app_data @@}}/yazi/plugins/custom-search.yazi"

    d_yazi_plugin_parent_arrow:
        src: config/yazi/plugins/parent-arrow.yazi
        dst: "{{@@ d_app_data @@}}/yazi/plugins/parent-arrow.yazi"

    # Terminal
    f_alacritty_config:
        src: config/alacritty/alacritty.toml
        dst: "{{@@ d_app_data @@}}/alacritty/alacritty.toml"

profiles:
    # Programs

    meta_vscode:
        variables:
            d_vscode_src: "config/vscode"
        dynvariables:
            f_vscode_extensions: "echo $FLEXYCON_HOME/dotfiles/{{@@ d_vscode_src @@}}/extensions.txt"
        dotfiles:
            - f_vscode_settings
            - f_vscode_keybindings

    meta_firefox:
        dynvariables:
            # We're only looking for the default profile until we find the first result,
            # then we convert it to Windows-style paths
            d_firefox_profiles: find ~/AppData/Roaming/Mozilla/Firefox/Profiles -name '*\.default-release' -print -quit | xargs cygpath -w
        variables:
            d_firefox_chrome_src: "config/firefox/chrome"
            f_firefox_user_src: "config/firefox/user.js"
        dotfiles:
            - d_firefox_chrome
            - f_firefox_user

    meta_yazi:
        dotfiles:
            - f_yazi_config
            - f_yazi_keymap
            - f_yazi_theme
            - f_yazi_package
            - f_yazi_init
            - d_yazi_plugin_custom_rename
            - d_yazi_plugin_custom_search
            - d_yazi_plugin_parent_arrow


    # Actual Profiles

    windows_home:
        include:
            - meta_vscode
            - meta_firefox
            - meta_yazi
        variables:
            d_app_data: "~/AppData/Roaming"
            d_vscode_dst: "~/AppData/Roaming/Code/User"
        dotfiles:
            - f_bash_profile
            - f_bash_config
            - f_git_config
            - f_alacritty_config
